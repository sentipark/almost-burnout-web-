# ğŸ”§ Supabase ì´ë©”ì¼ ì„¤ì • ê°€ì´ë“œ

## ğŸ“§ ì´ë©”ì¼ ë°œì†¡ì´ ì•ˆ ë˜ëŠ” ì´ìœ ì™€ í•´ê²° ë°©ë²•

### 1. í˜„ì¬ ë¬¸ì œ
- Supabase ë¬´ë£Œ í”Œëœì€ **í•˜ë£¨ 3ê°œ**ì˜ ì´ë©”ì¼ë§Œ ë°œì†¡ ê°€ëŠ¥
- Rate limiting: 3ì´ˆ ì´ë‚´ ì¬ìš”ì²­ ì‹œ ë³´ì•ˆ ì—ëŸ¬ ë°œìƒ
- SMTP ì„¤ì •ì´ ì•ˆ ë˜ì–´ ìˆìœ¼ë©´ ì´ë©”ì¼ ë°œì†¡ ë¶ˆê°€

---

## ğŸš€ ì¦‰ì‹œ í•´ê²° ë°©ë²•

### ë°©ë²• 1: Supabase ê¸°ë³¸ ì´ë©”ì¼ ì‚¬ìš© (ì œí•œì )
1. **Supabase ëŒ€ì‹œë³´ë“œ** â†’ **Authentication** â†’ **Settings**
2. **Email Settings** ì„¹ì…˜ í™•ì¸
3. **Enable Email Confirmations** í™œì„±í™”
4. **Site URL** ì„¤ì •: `https://almost-burnout-web.vercel.app`
5. **Redirect URLs** ì¶”ê°€: `https://almost-burnout-web.vercel.app/auth/callback`

**âš ï¸ ì œí•œì‚¬í•­:**
- ë¬´ë£Œ í”Œëœ: í•˜ë£¨ 3ê°œ ì´ë©”ì¼ë§Œ ë°œì†¡
- í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œë§Œ ì í•©

---

### ë°©ë²• 2: Custom SMTP ì„¤ì • (ê¶Œì¥) 

#### Gmail SMTP ì„¤ì • ì˜ˆì‹œ:
1. **Gmail ê³„ì •ì—ì„œ ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„±**
   - Google ê³„ì • ì„¤ì • â†’ ë³´ì•ˆ â†’ 2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”
   - ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„± (16ìë¦¬)

2. **Supabase SMTP ì„¤ì •**
   ```
   Host: smtp.gmail.com
   Port: 587
   Username: your-email@gmail.com
   Password: 16ìë¦¬ ì•± ë¹„ë°€ë²ˆí˜¸
   Sender email: your-email@gmail.com
   Sender name: AlmostBurnOut
   ```

3. **Supabase ëŒ€ì‹œë³´ë“œì—ì„œ ì„¤ì •**
   - **Settings** â†’ **Auth** â†’ **SMTP Settings**
   - ìœ„ ì •ë³´ ì…ë ¥ í›„ **Save**

#### SendGrid ì„¤ì • (í”„ë¡œë•ì…˜ ê¶Œì¥):
1. **SendGrid ê³„ì • ìƒì„±** (ë¬´ë£Œ 100ê°œ/ì¼)
2. **API Key ìƒì„±**
3. **Supabase SMTP ì„¤ì •**
   ```
   Host: smtp.sendgrid.net
   Port: 587
   Username: apikey
   Password: SendGrid API Key
   Sender email: verified-email@yourdomain.com
   ```

---

## ğŸ“ ì´ë©”ì¼ í…œí”Œë¦¿ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### Supabase ëŒ€ì‹œë³´ë“œì—ì„œ:
1. **Authentication** â†’ **Email Templates**
2. ê° í…œí”Œë¦¿ ìˆ˜ì • ê°€ëŠ¥:
   - **Confirm signup**: íšŒì›ê°€ì… í™•ì¸
   - **Reset password**: ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
   - **Magic Link**: ë§¤ì§ ë§í¬ ë¡œê·¸ì¸

### í•œêµ­ì–´ í…œí”Œë¦¿ ì˜ˆì‹œ:
```html
<h2>AlmostBurnOut íšŒì›ê°€ì…ì„ í™˜ì˜í•©ë‹ˆë‹¤!</h2>
<p>ì•ˆë…•í•˜ì„¸ìš” {{ .Email }}ë‹˜,</p>
<p>ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì´ë©”ì¼ ì¸ì¦ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”:</p>
<p><a href="{{ .ConfirmationURL }}">ì´ë©”ì¼ ì¸ì¦í•˜ê¸°</a></p>
<p>ë§í¬ëŠ” 24ì‹œê°„ ë™ì•ˆ ìœ íš¨í•©ë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤,<br>AlmostBurnOut íŒ€</p>
```

---

## ğŸ” ë¬¸ì œ í•´ê²°

### "For security purposes, you can only request this after 3 seconds" ì—ëŸ¬
**ì›ì¸**: Rate limiting
**í•´ê²°**: 
- 3ì´ˆ ì´ìƒ ê¸°ë‹¤ë¦° í›„ ì¬ì‹œë„
- í”„ë¡ íŠ¸ì—”ë“œì— ë””ë°”ìš´ì‹± ì¶”ê°€
- ë²„íŠ¼ ì—°ì† í´ë¦­ ë°©ì§€

### ì´ë©”ì¼ì´ ë„ì°©í•˜ì§€ ì•ŠëŠ” ê²½ìš°
1. **ìŠ¤íŒ¸ í´ë” í™•ì¸**
2. **Supabase Logs í™•ì¸**
   - Dashboard â†’ Logs â†’ Auth
3. **SMTP ì„¤ì • í™•ì¸**
   - Test Email ë°œì†¡ìœ¼ë¡œ í…ŒìŠ¤íŠ¸

### users í…Œì´ë¸”ì— ë°ì´í„°ê°€ ì €ì¥ë˜ì§€ ì•ŠëŠ” ê²½ìš°
1. **SQL Editorì—ì„œ `auth-fix.sql` ì‹¤í–‰**
2. **RLS ì •ì±… í™•ì¸**
3. **Trigger ë™ì‘ í™•ì¸**

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### Supabase ì„¤ì •:
- [ ] Site URL ì„¤ì • ì™„ë£Œ
- [ ] Redirect URLs ì„¤ì • ì™„ë£Œ
- [ ] Email Confirmations í™œì„±í™”
- [ ] SMTP ì„¤ì • (ì„ íƒì‚¬í•­)
- [ ] ì´ë©”ì¼ í…œí”Œë¦¿ ì»¤ìŠ¤í„°ë§ˆì´ì§• (ì„ íƒì‚¬í•­)

### SQL ì‹¤í–‰:
- [ ] `schema-update-fixed.sql` ì‹¤í–‰ (ìµëª… ì‚¬ìš©ì ì§€ì›)
- [ ] `auth-fix.sql` ì‹¤í–‰ (íšŒì›ê°€ì… ë¬¸ì œ í•´ê²°)

### ì½”ë“œ ë°°í¬:
- [ ] ìµœì‹  ì½”ë“œ Vercel ë°°í¬
- [ ] `/auth/callback` í˜ì´ì§€ ë™ì‘ í™•ì¸

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ìˆœì„œ

1. **íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸**
   - ìƒˆ ì´ë©”ì¼ë¡œ íšŒì›ê°€ì…
   - ì´ë©”ì¼ ë„ì°© í™•ì¸ (ìŠ¤íŒ¸ í´ë” í¬í•¨)
   - ì¸ì¦ ë§í¬ í´ë¦­
   - `/auth/callback`ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸

2. **ë°ì´í„° ì €ì¥ í™•ì¸**
   - Supabase Dashboard â†’ Table Editor
   - `users` í…Œì´ë¸”ì— ë°ì´í„° í™•ì¸
   - `auth.users`ì™€ `public.users` ë™ê¸°í™” í™•ì¸

3. **ìµëª… â†’ íšŒì› ì „í™˜**
   - ë¹„ë¡œê·¸ì¸ ìƒíƒœë¡œ ì§„ë‹¨ ì™„ë£Œ
   - íšŒì›ê°€ì…
   - ê¸°ì¡´ ì§„ë‹¨ ê²°ê³¼ê°€ ê³„ì •ê³¼ ì—°ê²°ë˜ëŠ”ì§€ í™•ì¸

---

## ğŸ“ ì¶”ê°€ ì§€ì›

ë¬¸ì œê°€ ì§€ì†ë˜ë©´:
1. Supabase Support ë¬¸ì˜
2. Vercel ë°°í¬ ë¡œê·¸ í™•ì¸
3. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ Console/Network íƒ­ í™•ì¸